function checkTableEditForm(h){var a=0;var d,g,c,b,e,f;for(d=obCountOrig;d<obCount;d++){f="fields["+d+"][type]";g=h.elements[f];if(undefined==g){continue}if(g.value=="VARCHAR"||g.value=="CHAR"||g.value=="BIT"||g.value=="VARBINARY"||g.value=="BINARY"){c=h.elements["fields["+d+"][length]"];e=parseInt(c.value);b=h.elements["fields["+d+"][name]"];if(isNaN(e)&&b.value!=""){c.select();alert(jgettext("This is not a number"));c.focus();return false}}if(a==0){f="fields["+d+"][name]";if(!emptyCheckTheField(h,f)){a=1}}}if(a==0){alert(jgettext("Please add at least one field"));return false}return true}function newRow(b){var c=new Element("div",{"class":"ecr_dbRow active",id:"dbRow"+obCount});var o="12";var m=new Element("div",{"class":"ecr_dbRowCell"}).injectInside(c);new Element("input",{type:"text",name:"fields["+obCount+"][name]",size:o}).injectInside(m);var g=new Element("div",{"class":"ecr_dbRowCell"}).injectInside(c);new Element("input",{type:"text",name:"fields["+obCount+"][label]",size:o}).injectInside(g);dbGetSelectTypes().injectInside(c);var h=new Element("div",{"class":"ecr_dbRowCell"}).injectInside(c);new Element("input",{type:"text",name:"fields["+obCount+"][length]",size:o}).injectInside(h);var l=new Element("div",{"class":"ecr_dbRowCell"}).injectInside(c);var k=new Element("select",{name:"fields["+obCount+"][attributes]"}).injectInside(l);new Element("option",{value:""}).appendText("").injectInside(k);new Element("option",{value:"UNSIGNED"}).appendText("UNSIGNED").injectInside(k);new Element("option",{value:"UNSIGNED ZEROFILL"}).appendText("UNSIGNED ZEROFILL").injectInside(k);var f=new Element("div",{"class":"ecr_dbRowCell"}).injectInside(c);var a=new Element("select",{name:"fields["+obCount+"][null]"}).injectInside(f);new Element("option",{value:"NOT_NULL"}).appendText("NOT NULL").injectInside(a);new Element("option",{value:"NULL"}).appendText("NULL").injectInside(a);var i=new Element("div",{"class":"ecr_dbRowCell"}).injectInside(c);new Element("input",{type:"text",name:"fields["+obCount+"][default]",size:o}).injectInside(i);var j=new Element("div",{"class":"ecr_dbRowCell"}).injectInside(c);var e=new Element("select",{name:"fields["+obCount+"][extra]"}).injectInside(j);new Element("option",{value:""}).appendText("").injectInside(e);new Element("option",{value:"AUTO_INCREMENT"}).appendText("AUTO INCREMENT").injectInside(e);var d=new Element("div",{"class":"ecr_dbRowCell"}).injectInside(c);new Element("input",{type:"text",name:"fields["+obCount+"][comment]",size:o}).injectInside(d);var n="document.id('dbRow"+obCount+"').dispose()";new Element("span",{"class":"btn btn-mini",onclick:n,text:jgettext("Delete")}).injectInside(c);c.injectInside($(b));obCount++;$(b).setStyle("width",obCount*100)}function addField(){add_field_name='Name <input type="text" name="new_field_name[]" />';s="";s+="Type";s+='<select name="new_field_type[]">';s+='<option value="int">INT</option>';s+='<option value="varchar">VARCHAR</option>';s+="</select>";var a=new Element("div");a.innerHTML=add_field_name+s;document.id("addField").adopt(a)}function addRelation(a){document.id("table_name").value=a;submitform("new_relation")}function dbGetSelectTypes(c){var d=["VARCHAR","TINYINT","TEXT","DATE","SMALLINT","MEDIUMINT","INT","BIGINT","FLOAT","DOUBLE","DECIMAL","DATETIME","TIMESTAMP","TIME","YEAR","CHAR","TINYBLOB","TINYTEXT","MEDIUMBLOB","MEDIUMTEXT","LONGBLOB","LONGTEXT","ENUM","SET","BIT","BOOL","BINARY","VARBINARY"];var e=new Element("div",{"class":"ecr_dbRowCell"});var a=new Element("select",{name:"fields["+obCount+"][type]"}).injectInside(e);for(var b=0;b<d.length;b++){new Element("option",{value:d[b]}).appendText(d[b]).injectInside(a)}return e}function getTableFieldSelector(a,b){url=ecrAJAXLink+"&controller=ajax";url+="&task=get_table_field_selector";url+="&table="+a;url+="&field_name="+b;new Request({url:url,onRequest:function(){$(b+"_container").innerHTML=jgettext("Loading...");$(b+"_container").className="ajax_loading16"},onComplete:function(c){var d=JSON.decode(c);if(!d.status){}$(b+"_container").innerHTML=d.text;$(b+"_container").className=""}}).send()};