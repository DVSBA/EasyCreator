var EcrZiper=new Class({url:"index.php?option=com_easycreator&tmpl=component&format=raw",createPackage:function(){document.id("zipResult").setStyle("display","block");var b=document.id("ajaxMessage");var a=document.id("zipResultLinks");startPoll();new Request({url:this.url+"&"+document.id("adminForm").toQueryString()+"&controller=ziper&task=createPackage",onRequest:function(){b.setStyle("color","black");b.className="ajax_loading16";b.innerHTML=jgettext("Creating your package...");a.innerHTML=""},onComplete:function(d){var c=JSON.decode(d);b.innerHTML="";b.className="";if(c.status){b.innerHTML=c.message;b.setStyle("color","red")}else{a.innerHTML=c.message}stopPoll()}}).send()},deleteZipFile:function(f,c){var b="index.php?option=com_easycreator&tmpl=component&format=raw";b+="&controller=ziper&task=delete";b+="&file_path="+f;b+="&file_name="+c;var e=document.id("ajaxMessage");var a=document.id("ajaxDebug");switch(ECR_JVERSION){case"1.5":var d=e.effects({duration:1000,transition:Fx.Transitions.Quart.easeOut});break;case"1.6":case"1.7":case"2.5":var d=new Fx.Morph(e,{});break;default:alert(jgettext("Undefined Joomla! version: %s",ECR_JVERSION));break}new Request({url:b,onRequest:function(){e.innerHTML=jgettext("Deleting...")},onComplete:function(g){resp=JSON.decode(g);e.set("text",resp.message);e.style.color="green";if(resp.status){e.style.color="red";a=resp.debug;return}else{$("row"+c).setStyle("display","none")}d.start({}).chain(function(){this.start.delay(1000,this,{opacity:0})}).chain(function(){e.style.display="none";this.start.delay(100,this,{opacity:1})})}}).send()},updateName:function(b){var a="index.php?option=com_easycreator&tmpl=component&format=raw&controller=ajax";a+="&ecr_project="+b;a+="&cst_format="+document.id("cst_format").value;new Request({url:a+"&task=update_project_name",onRequest:function(){document.id("ajMessage").className="ajax_loading16";document.id("ajMessage").innerHTML=jgettext("Loading...")},onComplete:function(c){document.id("ajName").innerHTML=c;document.id("ajMessage").innerHTML="";document.id("ajMessage").className=""}}).send()}});var EcrZiper=new EcrZiper;