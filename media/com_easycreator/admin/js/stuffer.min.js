function createFile(b,a){document.id("type1").value=b;document.id("type2").value=a;submitbutton("create_install_file")}function submitStuffer(a){if(document.id("package-to")==null){submitbutton(a);return}var c=document.id("package-to").getElements("li");var b=new Array();c.each(function(d){b.push(d.id)});document.id("packageElements").value=b.join(",");submitbutton(a)}window.addEvent("domready",function(){var a=new Sortables("#package-from, #package-to",{constrain:false,clone:true,revert:true})});var ecrStuffer=new Class({cnt_update:0,addUpdateServer:function(c,b,f,e){var a=document.id("updateServers");var d="";d+=jgettext("URL")+': <input type="text" name="updateServers[url][]" value="'+b+'" /><br />';d+=jgettext("Name")+': <input type="text" name="updateServers[name][]" value="'+c+'" /><br />';d+=jgettext("Priority")+': <input type="text" class="span1" name="updateServers[priority][]" value="'+e+'" /> ';d+=jgettext("Type")+': <input type="text" class="span1" name="updateServers[type][]" value="'+f+'" /><br />';d+='<br /><span class="btn btn-mini" onclick="this.getParent().dispose();">';d+=jgettext("Delete");d+="</span>";new Element("div",{style:"border: 1px solid silver; padding: 0.4em; margin: 0.2em;"}).set("html",d).inject(a)},newAction:function(){var b=document.id("sel_actions");var a=b.options[b.selectedIndex].value;if(""==a){alert(jgettext("Please select a type"));return false}trigger="";Stuffer.addAction(a,trigger,{})},addAction:function(f,c,b){this.cnt_update+=1;c=(undefined==c)?"":c;b.trigger=c;var a=document.id("container_actions");var e="";var d=this.cnt_update;e+='<input type="hidden" name="actions['+this.cnt_update+']" value="'+f+'" />';e+='<div class="actionTitle">'+f+"</div>";e+='<label class="inline" for="fields_'+d+'_trigger">'+jgettext("Trigger")+'</label><select class="span2" name="fields['+d+'][trigger]"><option value="precopy"'+("precopy"==c?' selected="selected"':"")+'>Pre Copy</option><option value="postcopy"'+("postcopy"==c?' selected="selected"':"")+">Post Copy</option></select><br />";new Request({url:ecrAJAXLink+"&controller=ajax&task=getAction&type="+f+"&options="+JSON.stringify(b)+"&cnt="+this.cnt_update,onComplete:function(g){var h=JSON.decode(g);if(h.status){alert(h.message+h.debug);return false}e+=h.message;e+='<br /><span class="btn btn-mini" onclick="this.getParent().dispose();">';e+=jgettext("Delete");e+="</span>";new Element("div",{style:"border: 1px solid silver; padding: 0.4em; margin: 0.2em;"}).set("html",e).inject(a)}}).send()},loadFilenameDefaults:function(){new Request({url:ecrAJAXLink+"&controller=ajax&task=getEcrParams",onComplete:function(a){var c=JSON.decode(a);if(c.status){alert(c.text);return false}var b=JSON.decode(c.text);document.id("custom_name_1").set("value",b.custom_name_1);document.id("custom_name_2").set("value",b.custom_name_2);document.id("custom_name_3").set("value",b.custom_name_3);document.id("custom_name_4").set("value",b.custom_name_4)}}).send()}});var Stuffer=new ecrStuffer();